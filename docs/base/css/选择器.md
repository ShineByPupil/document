# 选择器

## 一、基本选择器

> CSS 样式规则的基础定位工具

|    分类    | 语法          | 作用                       |
| :--------: | ------------- | -------------------------- |
|  **元素**  | `element`     | 选中所有指定 HTML 元素     |
|   **类**   | `.class-name` | 可重复使用，推荐语义化命名 |
|   **ID**   | `#id-name`    | 具有唯一性，用于精准定位   |
| **通配符** | `*`           | 选中所有元素（慎用）       |

## 二、组合选择器

> 通过运算符（空格、`>`、`+`、`~`）联结多个基础选择器

|     分类     | 语法                    | 作用                                                  |
| :----------: | ----------------------- | ----------------------------------------------------- |
|   **后代**   | `selector1 selector2`   | 选中 s1 内部的所有 s2                                 |
|  **子元素**  | `selector1 > selector2` | 仅选中直接子元素(s2)                                  |
| **相邻兄弟** | `selector1 + selector2` | 匹配紧邻的下一个兄弟元素(s2)<br/>(中间不能有其他元素) |
| **通用兄弟** | `selector1 ~ selector2` | 匹配后续所有同级元素(s2)                              |

## 三、属性选择器

|      分类      | 语法           | 示例                                | 作用                                      |
| :------------: | -------------- | ----------------------------------- | ----------------------------------------- |
|   **存在性**   | `[attr]`       | `input[disabled]`                   | 匹配拥有指定属性的元素                    |
|  **精确匹配**  | `[attr=val]`   | `input[type="submit"]`              | 匹配属性值完全等于指定值的元素            |
| **部分值匹配** | `[attr*=val]`  | `button[class*="btn"]`              | 属性值包含指定子字符串                    |
|                | `[attr^=val]`  | `a[href^="https"]`                  | 属性值以指定字符串开头                    |
|                | `[attr$=val]`  | `img[src$=".png"]`                  | 属性值以指定字符串结尾                    |
| **列表值匹配** | `[attr~=val]`  | `[class~="active"]`                 | 属性值为空格分隔的列表<br/>且包含完整单词 |
|                | `[attr\|=val]` | `[lang\|="zh"]`<br/>`[lang\|="CN"]` | 属性值以连字符分隔<br/>匹配前缀或整个值   |
| **忽略大小写** | `[attr=val i]` | `[class="login" i]`                 | 在任意属性选择器后添加 `i`                |

## 四、伪类选择器

> 精准定位元素的特定状态

| 分类     | 语法              | 示例                                 | 作用                                        |
| -------- | ----------------- | ------------------------------------ | ------------------------------------------- |
| **状态** | `:hover`          | `a:hover`                            | 鼠标悬停时触发                              |
|          | `:active`         | `button:active`                      | 元素被激活（如点击）时                      |
|          | `:focus`          | `input:focus`                        | 获得焦点时                                  |
|          | `:visited`        | `a:visited`                          | 已访问过的链接                              |
| **结构** | `:nth-child(n)`   | `li:nth-child(2n)`                   | 匹配第偶数个子元素                          |
|          | `:first-child`    | `ul > li:first-child`                | 第一个子元素                                |
|          | `:last-child`     | `div:last-child`                     | 最后一个子元素                              |
|          | `:nth-of-type(n)` | `p:nth-of-type(2)`                   | 匹配同级中第2个指定类型元素                 |
| **表单** | `:checked`        | `input:checked`<br/>`option:checked` | 被选中的表单控件                            |
|          | `:disabled`       | `input:disabled`                     | 禁用状态的表单元素                          |
|          | `:valid`          | `input:valid`                        | 输入内容通过验证时                          |
| **逻辑** | `:not()`          | `div:not(.hidden)`                   | 反向选择器，排除 `.hidden`                  |
|          | `:is()`           | `:is(h1,h2,h3)`                      | 分组匹配选择器<br/>(优先级由参数决定)       |
|          | `:has()`          | `div:has(img)`                       | 匹配包含子元素 `img` 的 `div`               |
|          | `:where()`        | `:where(.header, .footer) a`         | 分组匹配选择器<br/>(优先级始终为0)          |
| **动态** | `:focus-visible`  | `button:focus-visible`               | 键盘聚焦时显<br/>(避免鼠标点击时的焦点样式) |
|          | `:target`         | `#section:target`                    | URL片段标识符匹配的元素<br/>(如锚点跳转)    |
| **语言** | `:lang()`         | `:lang(en)`                          | 根据元素lang属性匹配                        |

## 五、伪元素选择器

> 精准定位元素的虚拟子结构

| 语法                  | 作用                                |
| --------------------- | ----------------------------------- |
| `::before`            | 在元素内容前插入内容                |
| `::after`             | 在元素内容后插入内容                |
| `::first-letter`      | 首字母样式                          |
| `::first-line`        | 首行样式                            |
| `::selection`         | 用户选中文本的样式                  |
| `::marker`            | 设置列表项标记（如符号/数字）的样式 |
| `::-webkit-scrollbar` | 设置滚动条样式                      |

## 特异性

> CSS 选择器的优先级计算规则，解决样式冲突，确定最终生效的样式

:::tip 最佳实践
尽量使用类选择器，保持特异性层级简单可维护
:::

**特异性计算规则**

特异性由三组数字表示：`(a, b, c)`，比较时从左到右逐级对比：

- a：ID 选择器的数量。
- b：类、属性、伪类选择器的数量。
- c：元素选择器的数量。

**示例**

| 选择器               | 特异性      | 解释                    |
| -------------------- | ----------- | ----------------------- |
| `#nav`               | `(1, 0, 0)` | 1个ID                   |
| `.menu li`           | `(0, 1, 1)` | 1个类 + 1个元素         |
| `input[type="text"]` | `(0, 1, 1)` | 1个属性选择器 + 1个元素 |
| `div:hover`          | `(0, 1, 1)` | 1个伪类 + 1个元素       |

**优先级**

1. 内联样式（如 \<div style="...">） > ID > 类 > 元素。
2. 特异性相同时，后定义的样式覆盖前者。
3. `!important` 强制最高优先级，会破坏样式层叠规则，导致维护困难（仅限工具类/覆盖第三方库时谨慎使用）
