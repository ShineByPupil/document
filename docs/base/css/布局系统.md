# 布局系统

> 现代Web布局解决方案

## 传统文档流布局

### 块级元素

- **核心特性**:
    - 默认占据父容器整行宽度（`width: 100%`）
    - 可定义尺寸属性（`width`/`height`/`padding`/`margin`）
    - 垂直方向依次排列（即使容器有剩余空间）
- 常见标签：`div`, `p`, `h1` - `h6`, `ul`, `li`, `section`

### 行内元素

- **核心特性**:
    - 默认同行排列，宽度由内容决定
    - 无法直接设置宽高（需通过display: inline-block转换）
    - 仅支持水平方向的`padding`/`margin`
- 常见标签：`span`, `a`, `strong`, `em`, `img`, `input`

### display属性详解

**基础显示模式**

| 属性值            | 核心特性               | 典型应用场景    |
|----------------|--------------------|-----------|
| `block`        | 占据整行，可设置宽高，垂直排列    | 段落、容器区块   |
| `inline`       | 行内排列，不可设置宽高，默认内容宽度 | 文字修饰元素    |
| `inline-block` | 行内排列但保留块级特性，可设置宽高  | 导航按钮、图标布局 |
| `none`         | 完全从渲染树移除，不占据空间     | 动态显示/隐藏元素 |

**现代布局模式**

| 属性值           | 布局特性                  | 核心优势         |
|---------------|-----------------------|--------------|
| `flex`        | 弹性盒子布局，一维布局，支持动态伸缩    | 响应式排列、对齐控制   |
| `inline-flex` | 行内级弹性容器，外部表现为inline特性 | 内联菜单、紧凑布局    |
| `grid`        | 网格布局，二维布局，精准行列控制      | 复杂卡片布局、杂志式排版 |
| `inline-grid` | 行内级网格容器               | 内嵌网格内容       |

**特殊显示模式**

| 属性值         | 核心特性                                | 注意要点                  |
|-------------|-------------------------------------|-----------------------|
| `flow-root` | 创建新的BFC上下文，解决浮动塌陷                   | 替代 `overflow: hidden` |
| `contents`  | 元素自身不渲染，子元素提升到父级层级                  | 影响无障碍访问，慎用！           |
| `table`     | 模拟表格布局 (table/table-row/table-cell) | 传统布局方式，逐渐被Flex/Grid替代 |
| `list-item` | 元素表现为列表项，生成`::marker`               | 自定义列表符号时使用            |

**复合属性值（CSS3+）**

| 属性值                   | 	作用描述                |
|-----------------------|----------------------|
| `block flex`          | 外部表现为块级容器，内部启用Flex布局 |
| `inline grid`         | 外部表现为行内容器，内部启用Grid布局 |
| `flow-root list-item` | 同时创建BFC和列表项标记        |

### 默认流式布局特性

> 自动换行规则：块级元素垂直排列，行内元素水平排列直至容器宽度不足

**外边距塌陷（Margin Collapsing）**

- 触发条件：
    1. 相邻兄弟元素的垂直边距
    2. 父元素与第一个/最后一个子元素的边距
    3. 空块级元素的上下边距
- 解决方案：
    1. 添加边框或内边距
    2. 创建BFC
    3. 使用flex/grid布局

## Flexbox 弹性盒子布局

### 父容器属性 (flex container)

:::demo onlyShow
base/css/FlexContainer/index
:::

| 属性名                   | 可选值                                                                                                            | 说明                        |
|-----------------------|----------------------------------------------------------------------------------------------------------------|---------------------------|
| **`display`**         | `flex` \| `inline-flex`                                                                                        | 定义弹性容器                    |
| **`flex-direction`**  | - `row`（默认值）<br>- `row-reverse`<br>- `column`<br>- `column-reverse`                                            | 主轴方向                      |
| **`flex-wrap`**       | - `nowrap`（默认值）<br>- `wrap`<br>- `wrap-reverse`                                                                | 换行方式<br>(单/多行)            |
| **`justify-content`** | - `flex-start`（默认值）<br>- `flex-end`<br>- `center`<br>- `space-between`<br>- `space-around`<br>- `space-evenly` | 主轴对齐                      |
| **`align-items`**     | - `stretch`（默认值）<br>- `flex-start`<br>- `flex-end`<br>- `center`<br>- `baseline`                               | (单行)交叉轴对齐                 |
| **`align-content`**   | - `stretch`（默认值）<br>- `flex-start`<br>- `flex-end`<br>- `center`<br>- `space-between`<br>- `space-around`      | (多行)交叉轴对齐                 |
| **`gap`**             | - `<length>`（默认值0）<br>- `[row-gap] [column-gap]`                                                               | 项目间距                      |
| **`place-content`**   | `[justify-content] [align-content]`                                                                            | ● 双值简写属性<br>● 省略第二个值时取相同值 |

### 子项目属性 (flex item)

:::demo onlyShow
base/css/FlexItemController/index
:::

| 属性名               | 可选值                                                                                          | 说明          |
|-------------------|----------------------------------------------------------------------------------------------|-------------|
| **`order`**       | `<integer>`（默认值0）                                                                            | 项目排序，从小到大   |
| **`flex-grow`**   | `<number>`（默认值0）                                                                             | 扩展比例，0=不扩展  |
| **`flex-shrink`** | `<number>`（默认值1）                                                                             | 收缩比例，0=禁止收缩 |
| **`flex-basis`**  | `<width>` \| `content`                                                                       | 初始尺寸        |
| **`align-self`**  | - `auto`（默认值）<br>- `stretch`<br>- `flex-start`<br>- `flex-end`<br>- `center`<br>- `baseline` | 交叉轴对齐方式     |

### 聚合属性 flex

| 简写格式                   | 等效展开                     | 参数说明                                                         |
|------------------------|--------------------------|--------------------------------------------------------------|
| **单值语法**               |                          |                                                              |
| `flex: <number>`       | `flex: <number> 1 0%`    | `[grow] = <number>`<br> `[shrink] = 1`<br> `[basis] = 0%`    |
| `flex: <length>`       | `flex: 1 1 <length>`     | `[grow] = 1`<br> `[shrink] = 1`<br> `[basis]` = `<length>`   |
| `flex: none`           | `flex: 0 0 auto`         | - 禁止伸缩的固定尺寸项目                                                |
| **双值语法**               |                          |                                                              |
| `flex: <num> <num>`    | `flex: <num1> <num2> 0%` | `[grow] = <num1>`<br> `[shrink] = <num2>`<br> `[basis] = 0%` |
| `flex: <num> <length>` | `flex: <num> 1 <length>` | `[grow] = <num>`<br> `[shrink] = 1`<br> `[basis] = <length>` |
| **三值语法**               |                          |                                                              |
| `flex: <g> <s> <b>`    | 完全显式声明                   | `[grow] = <g>`<br> `[shrink] = <s>`<br> `[basis] = <b>`      |

## Grid 网格布局

### 显式网格与隐式网格

### 轨道尺寸定义

    - 补充：fr单位/minmax()/repeat()

### 网格线命名与区域模板

### 高级对齐与分层控制

    - 增加：subgrid特性说明

## 定位与层叠

### position 定位模式

    - 补充：sticky定位详解 

### z-index 层叠上下文规则

    - 新增：transform/opacity创建条件

### 定位元素的百分比计算基准

## 浮动布局（历史方案）

### 浮动元素的包裹特性

### 清除浮动方案演进

    - 传统：clearfix hack
    - 现代：flow-root属性

### 浮动与形状环绕

## 响应式布局

### 媒体查询与断点策略

### 视口单位进阶应用

    - 补充：vmin/vmax使用场景

### 容器查询实践

    - 增加：cqw/cqh单位

## 多列布局

### column属性全解析

    - 包含：column-rule/column-fill

### 跨列元素处理

    - 明确：column-span: all的兼容性

### 流式分栏与固定高度分栏

## 布局技巧与常见问题

### 全场景居中方案

    - 区分：传统定位 vs Flex/Grid现代方案

### 等高列实现对比

    - 增加：CSS Grid方案

### 内容溢出处理

    - 补充：scroll-snap应用

### 布局性能优化

    - 增加：content-visibility属性
